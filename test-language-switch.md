# 語言切換測試指南

## 測試步驟

1. **開啟應用程式**
   - 瀏覽器開啟 http://localhost:3001

2. **測試基本語言切換**
   - 點擊右上角的語言下拉選單
   - 選擇不同的語言（中文、英文、日文）
   - 觀察頁面是否立即更新，無需重新整理

3. **測試 URL 參數**
   - 語言切換後檢查 URL 是否包含 `?lang=xx` 參數
   - 複製帶有語言參數的 URL，在新分頁開啟，確認語言正確

4. **測試頁面導航**
   - 切換語言後，點擊不同頁面連結
   - 確認新頁面保持所選語言
   - 測試 Dashboard、Line Bot 等頁面

5. **測試瀏覽器前進/後退**
   - 切換語言
   - 使用瀏覽器後退按鈕
   - 確認語言正確恢復

## 預期結果

- ✅ 語言切換後立即生效，無需重新整理
- ✅ URL 參數正確更新
- ✅ 頁面導航保持語言設定
- ✅ 瀏覽器前進/後退功能正常
- ✅ localStorage 正確儲存語言偏好

## 實作改進

已實作的功能：
1. **強制重新渲染機制** - 使用 `appKey` 確保組件完全重新渲染
2. **URL 參數監聽** - 監聽瀏覽器 `popstate` 事件
3. **即時狀態更新** - 語言切換時同步更新所有相關狀態